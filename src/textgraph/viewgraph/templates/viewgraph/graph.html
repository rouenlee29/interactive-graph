<!-- https://stackoverflow.com/questions/18586921/how-to-launch-html-using-chrome-at-allow-file-access-from-files-mode -->
<!DOCTYPE html>
<meta charset="utf-8">
<style>

:root {
  --x-offset:60px;
}

.links line {
  stroke: rgb(15, 15, 15);
}

.nodes circle {
  stroke: #fff;
  stroke-width: 1.5px;
}

.svg-container {
    display: inline-block;
    position: relative;
    width: 100%;
    padding-bottom: 100%;
    vertical-align: top;
    overflow: hidden;
    z-index: -1;
}
.svg-content {
    display: inline-block;
    position: absolute;
    top: 0;
    left: 0;
}
.overlay {
    position: absolute;
    top: 5px;
    left: var(--x-offset);
    column-count: 3;
}


</style>

<body>
<div id="container" class="svg-container">
    
    
    <svg></svg>
    
    
</div>

<div class = "overlay">
    <h2>Select movies you are interested in:</h2>
    <form action="/selection" method="get">
      

      <input type="checkbox" name="movie137" value=idx>
      <label for="movied137"> Rabbit Hole</label><br>
      

      <input type="checkbox" name="movie934" value=idx>
      <label for="movied934"> Zero Charisma</label><br>
      

      <input type="checkbox" name="movie630" value=idx>
      <label for="movied630">12 Rounds 2: Reloaded</label><br>
      

      <input type="checkbox" name="movie992" value=idx>
      <label for="movied992">13 Sins</label><br>
      

      <input type="checkbox" name="movie374" value=idx>
      <label for="movied374">21 Jump Street</label><br>
      

      <input type="checkbox" name="movie632" value=idx>
      <label for="movied632">21 and Over</label><br>
      

      <input type="checkbox" name="movie1016" value=idx>
      <label for="movied1016">22 Jump Street</label><br>
      

      <input type="checkbox" name="movie1439" value=idx>
      <label for="movied1439">2:22</label><br>
      

      <input type="checkbox" name="movie192" value=idx>
      <label for="movied192">50/50</label><br>
      

      <input type="checkbox" name="movie1344" value=idx>
      <label for="movied1344">A Dog's Purpose</label><br>
      

      <input type="checkbox" name="movie253" value=idx>
      <label for="movied253">A Good Old Fashioned Orgy</label><br>
      

      <input type="checkbox" name="movie989" value=idx>
      <label for="movied989">A Haunted House 2</label><br>
      

      <input type="checkbox" name="movie609" value=idx>
      <label for="movied609">A Thousand Words</label><br>
      

      <input type="checkbox" name="movie1299" value=idx>
      <label for="movied1299">Alice Through the Looking Glass</label><br>
      

      <input type="checkbox" name="movie4" value=idx>
      <label for="movied4">Alice in Wonderland</label><br>
      

      <input type="checkbox" name="movie643" value=idx>
      <label for="movied643">American Hustle</label><br>
      

      <input type="checkbox" name="movie1076" value=idx>
      <label for="movied1076">Annabelle</label><br>
      

      <input type="checkbox" name="movie646" value=idx>
      <label for="movied646">Apartment 1303 3D</label><br>
      

      <input type="checkbox" name="movie203" value=idx>
      <label for="movied203">Atlas Shrugged: Part I</label><br>
      

      <input type="checkbox" name="movie398" value=idx>
      <label for="movied398">Atlas Shrugged: Part II</label><br>
      

      <input type="checkbox" name="movie966" value=idx>
      <label for="movied966">Barefoot</label><br>
      

      <input type="checkbox" name="movie1373" value=idx>
      <label for="movied1373">Beauty and the Beast</label><br>
      

      <input type="checkbox" name="movie413" value=idx>
      <label for="movied413">Beauty and the Beast 3D</label><br>
      

      <input type="checkbox" name="movie12" value=idx>
      <label for="movied12">Black Swan</label><br>
      

      <input type="checkbox" name="movie1134" value=idx>
      <label for="movied1134">Black or White</label><br>
      

      <input type="checkbox" name="movie1008" value=idx>
      <label for="movied1008">Blended</label><br>
      

      <input type="checkbox" name="movie430" value=idx>
      <label for="movied430">Breaking Wind</label><br>
      

      <input type="checkbox" name="movie681" value=idx>
      <label for="movied681">C.O.G.</label><br>
      

      <input type="checkbox" name="movie435" value=idx>
      <label for="movied435">Campaign, The Campaign</label><br>
      

      <input type="checkbox" name="movie214" value=idx>
      <label for="movied214">Captain America: The First Avenger</label><br>
      

      <input type="checkbox" name="movie982" value=idx>
      <label for="movied982">Captain America: The Winter Soldier</label><br>
      

      <input type="checkbox" name="movie686" value=idx>
      <label for="movied686">Carrie</label><br>
      

      <input type="checkbox" name="movie770" value=idx>
      <label for="movied770">Catching Fire, The Hunger Games:The Hunger Games: Catching Fire</label><br>
      

      <input type="checkbox" name="movie1307" value=idx>
      <label for="movied1307">Central Intelligence</label><br>
      

      <input type="checkbox" name="movie22" value=idx>
      <label for="movied22">Charlie St. Cloud</label><br>
      

      <input type="checkbox" name="movie976" value=idx>
      <label for="movied976">Cheap Thrills (film)</label><br>
      

      <input type="checkbox" name="movie444" value=idx>
      <label for="movied444">Christmas with the Dead</label><br>
      

      <input type="checkbox" name="movie25" value=idx>
      <label for="movied25">Clash of the Titans</label><br>
      

      <input type="checkbox" name="movie1230" value=idx>
      <label for="movied1230">Daddy's Home</label><br>
      

      <input type="checkbox" name="movie1511" value=idx>
      <label for="movied1511">Daddy's Home 2</label><br>
      

      <input type="checkbox" name="movie34" value=idx>
      <label for="movied34">Darkening Sky</label><br>
      

      <input type="checkbox" name="movie1030" value=idx>
      <label for="movied1030">Dawn of the Planet of the Apes</label><br>
      

      <input type="checkbox" name="movie39" value=idx>
      <label for="movied39">Despicable Me</label><br>
      

      <input type="checkbox" name="movie707" value=idx>
      <label for="movied707">Despicable Me 2</label><br>
      

      <input type="checkbox" name="movie1435" value=idx>
      <label for="movied1435">Despicable Me 3</label><br>
      

      <input type="checkbox" name="movie41" value=idx>
      <label for="movied41">Diary of a Wimpy Kid</label><br>
      

      <input type="checkbox" name="movie472" value=idx>
      <label for="movied472">Diary of a Wimpy Kid: Dog Days</label><br>
      

      <input type="checkbox" name="movie231" value=idx>
      <label for="movied231">Diary of a Wimpy Kid: Rodrick Rules</label><br>
      

      <input type="checkbox" name="movie1411" value=idx>
      <label for="movied1411">Diary of a Wimpy Kid: The Long Haul</label><br>
      

      <input type="checkbox" name="movie977" value=idx>
      <label for="movied977">Divergent</label><br>
      

      <input type="checkbox" name="movie234" value=idx>
      <label for="movied234">Dolphin Tale</label><br>
      

      <input type="checkbox" name="movie1063" value=idx>
      <label for="movied1063">Dolphin Tale 2</label><br>
      

      <input type="checkbox" name="movie1208" value=idx>
      <label for="movied1208">Dope</label><br>
      

      <input type="checkbox" name="movie44" value=idx>
      <label for="movied44">Due Date</label><br>
      

      <input type="checkbox" name="movie240" value=idx>
      <label for="movied240">Dylan Dog: Dead of Night</label><br>
      

      <input type="checkbox" name="movie45" value=idx>
      <label for="movied45">Easy A</label><br>
      

      <input type="checkbox" name="movie242" value=idx>
      <label for="movied242">Everything Must Go</label><br>
      

      <input type="checkbox" name="movie722" value=idx>
      <label for="movied722">Evil Dead</label><br>
      

      <input type="checkbox" name="movie723" value=idx>
      <label for="movied723">Face of Love, The Face of Love</label><br>
      

      <input type="checkbox" name="movie726" value=idx>
      <label for="movied726">Fast & Furious 6</label><br>
      

      <input type="checkbox" name="movie244" value=idx>
      <label for="movied244">Fast Five</label><br>
      

      <input type="checkbox" name="movie1352" value=idx>
      <label for="movied1352">Fifty Shades Darker</label><br>
      

      <input type="checkbox" name="movie1144" value=idx>
      <label for="movied1144">Fifty Shades of Grey</label><br>
      

      <input type="checkbox" name="movie1306" value=idx>
      <label for="movied1306">Finding Dory</label><br>
      

      <input type="checkbox" name="movie489" value=idx>
      <label for="movied489">Finding Nemo 3D</label><br>
      

      <input type="checkbox" name="movie496" value=idx>
      <label for="movied496">For a Good Time, Call...</label><br>
      

      <input type="checkbox" name="movie247" value=idx>
      <label for="movied247">Friends with Benefits</label><br>
      

      <input type="checkbox" name="movie248" value=idx>
      <label for="movied248">Fright Night</label><br>
      

      <input type="checkbox" name="movie732" value=idx>
      <label for="movied732">Fright Night 2: New Blood</label><br>
      

      <input type="checkbox" name="movie1174" value=idx>
      <label for="movied1174">Furious 7</label><br>
      

      <input type="checkbox" name="movie1089" value=idx>
      <label for="movied1089">Fury</label><br>
      

      <input type="checkbox" name="movie509" value=idx>
      <label for="movied509">Gone</label><br>
      

      <input type="checkbox" name="movie627" value=idx>
      <label for="movied627">Goodbye Promise</label><br>
      

      <input type="checkbox" name="movie67" value=idx>
      <label for="movied67">Grown Ups</label><br>
      

      <input type="checkbox" name="movie751" value=idx>
      <label for="movied751">Grown Ups 2</label><br>
      

      <input type="checkbox" name="movie1043" value=idx>
      <label for="movied1043">Guardians of the Galaxy</label><br>
      

      <input type="checkbox" name="movie1402" value=idx>
      <label for="movied1402">Guardians of the Galaxy Vol. 2</label><br>
      

      <input type="checkbox" name="movie753" value=idx>
      <label for="movied753">Hangover Part III, The Hangover Part III</label><br>
      

      <input type="checkbox" name="movie69" value=idx>
      <label for="movied69">Harry Potter and the Deathly Hallows: Part 1</label><br>
      

      <input type="checkbox" name="movie262" value=idx>
      <label for="movied262">Harry Potter and the Deathly Hallows: Part 2</label><br>
      

      <input type="checkbox" name="movie758" value=idx>
      <label for="movied758">Haunted House, AA Haunted House</label><br>
      

      <input type="checkbox" name="movie759" value=idx>
      <label for="movied759">Haunting in Connecticut 2: Ghosts of Georgia, The Haunting in Connecticut 2: Ghosts of Georgia</label><br>
      

      <input type="checkbox" name="movie1040" value=idx>
      <label for="movied1040">Hercules</label><br>
      

      <input type="checkbox" name="movie72" value=idx>
      <label for="movied72">Hot Tub Time Machine</label><br>
      

      <input type="checkbox" name="movie1148" value=idx>
      <label for="movied1148">Hot Tub Time Machine 2</label><br>
      

      <input type="checkbox" name="movie74" value=idx>
      <label for="movied74">How to Train Your Dragon</label><br>
      

      <input type="checkbox" name="movie1018" value=idx>
      <label for="movied1018">How to Train Your Dragon 2</label><br>
      

      <input type="checkbox" name="movie772" value=idx>
      <label for="movied772">I Spit on Your Grave 2</label><br>
      

      <input type="checkbox" name="movie1055" value=idx>
      <label for="movied1055">If I Stay</label><br>
      

      <input type="checkbox" name="movie1438" value=idx>
      <label for="movied1438">Inconceivable</label><br>
      

      <input type="checkbox" name="movie1109" value=idx>
      <label for="movied1109">Inherent Vice</label><br>
      

      <input type="checkbox" name="movie277" value=idx>
      <label for="movied277">Insidious</label><br>
      

      <input type="checkbox" name="movie782" value=idx>
      <label for="movied782">Insidious: Chapter 2</label><br>
      

      <input type="checkbox" name="movie79" value=idx>
      <label for="movied79">Iron Man 2</label><br>
      

      <input type="checkbox" name="movie784" value=idx>
      <label for="movied784">Iron Man 3</label><br>
      

      <input type="checkbox" name="movie1162" value=idx>
      <label for="movied1162">It Follows</label><br>
      

      <input type="checkbox" name="movie80" value=idx>
      <label for="movied80">It's Kind of a Funny Story</label><br>
      

      <input type="checkbox" name="movie279" value=idx>
      <label for="movied279">Jack and Jill</label><br>
      

      <input type="checkbox" name="movie788" value=idx>
      <label for="movied788">Jackass Presents: Bad Grandpa</label><br>
      

      <input type="checkbox" name="movie88" value=idx>
      <label for="movied88">Kick-Ass</label><br>
      

      <input type="checkbox" name="movie799" value=idx>
      <label for="movied799">Kick-Ass 2</label><br>
      

      <input type="checkbox" name="movie990" value=idx>
      <label for="movied990">Kid Cannabis</label><br>
      

      <input type="checkbox" name="movie1473" value=idx>
      <label for="movied1473">Kingsman: The Golden Circle</label><br>
      

      <input type="checkbox" name="movie1145" value=idx>
      <label for="movied1145">Kingsman: The Secret Service</label><br>
      

      <input type="checkbox" name="movie286" value=idx>
      <label for="movied286">Kung Fu Panda 2</label><br>
      

      <input type="checkbox" name="movie1246" value=idx>
      <label for="movied1246">Kung Fu Panda 3</label><br>
      

      <input type="checkbox" name="movie820" value=idx>
      <label for="movied820">LUV</label><br>
      

      <input type="checkbox" name="movie807" value=idx>
      <label for="movied807">Last Exorcism Part II, The Last Exorcism Part II</label><br>
      

      <input type="checkbox" name="movie102" value=idx>
      <label for="movied102">Letters to God</label><br>
      

      <input type="checkbox" name="movie1378" value=idx>
      <label for="movied1378">Life</label><br>
      

      <input type="checkbox" name="movie106" value=idx>
      <label for="movied106">Little Fockers</label><br>
      

      <input type="checkbox" name="movie1261" value=idx>
      <label for="movied1261">London Has Fallen</label><br>
      

      <input type="checkbox" name="movie815" value=idx>
      <label for="movied815">Lords of Salem, The Lords of Salem</label><br>
      

      <input type="checkbox" name="movie109" value=idx>
      <label for="movied109">Love & Other Drugs</label><br>
      

      <input type="checkbox" name="movie111" value=idx>
      <label for="movied111">Machete</label><br>
      

      <input type="checkbox" name="movie821" value=idx>
      <label for="movied821">Machete Kills</label><br>
      

      <input type="checkbox" name="movie296" value=idx>
      <label for="movied296">Mars Needs Moms</label><br>
      

      <input type="checkbox" name="movie1207" value=idx>
      <label for="movied1207">Me and Earl and the Dying Girl</label><br>
      

      <input type="checkbox" name="movie828" value=idx>
      <label for="movied828">Monsters University</label><br>
      

      <input type="checkbox" name="movie551" value=idx>
      <label for="movied551">Monsters, Inc. 3D</label><br>
      

      <input type="checkbox" name="movie978" value=idx>
      <label for="movied978">Muppets Most Wanted</label><br>
      

      <input type="checkbox" name="movie833" value=idx>
      <label for="movied833">Nebraska</label><br>
      

      <input type="checkbox" name="movie1003" value=idx>
      <label for="movied1003">Neighbors</label><br>
      

      <input type="checkbox" name="movie1296" value=idx>
      <label for="movied1296">Neighbors 2: Sorority Rising</label><br>
      

      <input type="checkbox" name="movie1091" value=idx>
      <label for="movied1091">Nightcrawler</label><br>
      

      <input type="checkbox" name="movie307" value=idx>
      <label for="movied307">No Strings Attached</label><br>
      

      <input type="checkbox" name="movie835" value=idx>
      <label for="movied835">Now You See Me</label><br>
      

      <input type="checkbox" name="movie1305" value=idx>
      <label for="movied1305">Now You See Me 2</label><br>
      

      <input type="checkbox" name="movie839" value=idx>
      <label for="movied839">Olympus Has Fallen</label><br>
      

      <input type="checkbox" name="movie560" value=idx>
      <label for="movied560">ParaNorman</label><br>
      

      <input type="checkbox" name="movie128" value=idx>
      <label for="movied128">Paranormal Activity 2</label><br>
      

      <input type="checkbox" name="movie310" value=idx>
      <label for="movied310">Paranormal Activity 3</label><br>
      

      <input type="checkbox" name="movie129" value=idx>
      <label for="movied129">Passion Play</label><br>
      

      <input type="checkbox" name="movie130" value=idx>
      <label for="movied130">Percy Jackson & the Olympians: The Lightning Thief</label><br>
      

      <input type="checkbox" name="movie852" value=idx>
      <label for="movied852">Percy Jackson: Sea of Monsters</label><br>
      

      <input type="checkbox" name="movie566" value=idx>
      <label for="movied566">Pitch Perfect</label><br>
      

      <input type="checkbox" name="movie1196" value=idx>
      <label for="movied1196">Pitch Perfect 2</label><br>
      

      <input type="checkbox" name="movie1533" value=idx>
      <label for="movied1533">Pitch Perfect 3</label><br>
      

      <input type="checkbox" name="movie856" value=idx>
      <label for="movied856">Planes</label><br>
      

      <input type="checkbox" name="movie1035" value=idx>
      <label for="movied1035">Planes: Fire & Rescue</label><br>
      

      <input type="checkbox" name="movie860" value=idx>
      <label for="movied860">Pretty One, The Pretty One</label><br>
      

      <input type="checkbox" name="movie1491" value=idx>
      <label for="movied1491">Professor Marston and the Wonder Women</label><br>
      

      <input type="checkbox" name="movie1136" value=idx>
      <label for="movied1136">Project Almanac</label><br>
      

      <input type="checkbox" name="movie867" value=idx>
      <label for="movied867">RED 2</label><br>
      

      <input type="checkbox" name="movie138" value=idx>
      <label for="movied138">Ramona and Beezus</label><br>
      

      <input type="checkbox" name="movie140" value=idx>
      <label for="movied140">Red</label><br>
      

      <input type="checkbox" name="movie141" value=idx>
      <label for="movied141">Remember Me</label><br>
      

      <input type="checkbox" name="movie143" value=idx>
      <label for="movied143">Resident Evil: Afterlife</label><br>
      

      <input type="checkbox" name="movie579" value=idx>
      <label for="movied579">Resident Evil: Retribution</label><br>
      

      <input type="checkbox" name="movie1345" value=idx>
      <label for="movied1345">Resident Evil: The Final Chapter</label><br>
      

      <input type="checkbox" name="movie944" value=idx>
      <label for="movied944">Ride Along</label><br>
      

      <input type="checkbox" name="movie1238" value=idx>
      <label for="movied1238">Ride Along 2</label><br>
      

      <input type="checkbox" name="movie325" value=idx>
      <label for="movied325">Rio</label><br>
      

      <input type="checkbox" name="movie987" value=idx>
      <label for="movied987">Rio 2</label><br>
      

      <input type="checkbox" name="movie326" value=idx>
      <label for="movied326">Rise of the Planet of the Apes</label><br>
      

      <input type="checkbox" name="movie1223" value=idx>
      <label for="movied1223">Room (2015 film)</label><br>
      

      <input type="checkbox" name="movie583" value=idx>
      <label for="movied583">Ruby Sparks</label><br>
      

      <input type="checkbox" name="movie874" value=idx>
      <label for="movied874">Safe Haven</label><br>
      

      <input type="checkbox" name="movie150" value=idx>
      <label for="movied150">Scott Pilgrim vs. the World</label><br>
      

      <input type="checkbox" name="movie152" value=idx>
      <label for="movied152">Sex and the City 2</label><br>
      

      <input type="checkbox" name="movie883" value=idx>
      <label for="movied883">Sexy Evil Genius</label><br>
      

      <input type="checkbox" name="movie1401" value=idx>
      <label for="movied1401">Sleight</label><br>
      

      <input type="checkbox" name="movie890" value=idx>
      <label for="movied890">Smurfs 2, The Smurfs 2</label><br>
      

      <input type="checkbox" name="movie891" value=idx>
      <label for="movied891">Smurfs: The Legend of Smurfy Hollow, The Smurfs: The Legend of Smurfy Hollow</label><br>
      

      <input type="checkbox" name="movie1386" value=idx>
      <label for="movied1386">Smurfs: The Lost Village</label><br>
      

      <input type="checkbox" name="movie898" value=idx>
      <label for="movied898">Stand Up Guys</label><br>
      

      <input type="checkbox" name="movie1475" value=idx>
      <label for="movied1475">Stronger</label><br>
      

      <input type="checkbox" name="movie1300" value=idx>
      <label for="movied1300">TMNT 2: Out of the Shadows</label><br>
      

      <input type="checkbox" name="movie348" value=idx>
      <label for="movied348">Take Me Home Tonight</label><br>
      

      <input type="checkbox" name="movie602" value=idx>
      <label for="movied602">Taken 2</label><br>
      

      <input type="checkbox" name="movie1119" value=idx>
      <label for="movied1119">Taken 3</label><br>
      

      <input type="checkbox" name="movie604" value=idx>
      <label for="movied604">Ted</label><br>
      

      <input type="checkbox" name="movie1211" value=idx>
      <label for="movied1211">Ted 2</label><br>
      

      <input type="checkbox" name="movie1049" value=idx>
      <label for="movied1049">Teenage Mutant Nina Turtles</label><br>
      

      <input type="checkbox" name="movie15" value=idx>
      <label for="movied15">The Bounty Hunter</label><br>
      

      <input type="checkbox" name="movie1128" value=idx>
      <label for="movied1128">The Boy Next Door</label><br>
      

      <input type="checkbox" name="movie1335" value=idx>
      <label for="movied1335">The Bye Bye Man</label><br>
      

      <input type="checkbox" name="movie1269" value=idx>
      <label for="movied1269">The Divergent Series: Allegiant</label><br>
      

      <input type="checkbox" name="movie1166" value=idx>
      <label for="movied1166">The Divergent Series: Insurgent</label><br>
      

      <input type="checkbox" name="movie1391" value=idx>
      <label for="movied1391">The Fate of the Furious</label><br>
      

      <input type="checkbox" name="movie258" value=idx>
      <label for="movied258">The Hangover: Part II</label><br>
      

      <input type="checkbox" name="movie521" value=idx>
      <label for="movied521">The Hunger Games</label><br>
      

      <input type="checkbox" name="movie1104" value=idx>
      <label for="movied1104">The Hunger Games: Mockingjay – Part 1</label><br>
      

      <input type="checkbox" name="movie90" value=idx>
      <label for="movied90">The Killer Inside Me</label><br>
      

      <input type="checkbox" name="movie95" value=idx>
      <label for="movied95">The Last Exorcism</label><br>
      

      <input type="checkbox" name="movie939" value=idx>
      <label for="movied939">The Legend of Hercules</label><br>
      

      <input type="checkbox" name="movie304" value=idx>
      <label for="movied304">The Muppets</label><br>
      

      <input type="checkbox" name="movie122" value=idx>
      <label for="movied122">The Next Three Days</label><br>
      

      <input type="checkbox" name="movie943" value=idx>
      <label for="movied943">The Nut Job</label><br>
      

      <input type="checkbox" name="movie1457" value=idx>
      <label for="movied1457">The Nut Job 2: Nutty by Nature</label><br>
      

      <input type="checkbox" name="movie1054" value=idx>
      <label for="movied1054">The One I Love</label><br>
      

      <input type="checkbox" name="movie557" value=idx>
      <label for="movied557">The Oranges</label><br>
      

      <input type="checkbox" name="movie564" value=idx>
      <label for="movied564">The Perks of Being a Wallflower</label><br>
      

      <input type="checkbox" name="movie957" value=idx>
      <label for="movied957">The Pretty One</label><br>
      

      <input type="checkbox" name="movie335" value=idx>
      <label for="movied335">The Sitter</label><br>
      

      <input type="checkbox" name="movie1070" value=idx>
      <label for="movied1070">The Skeleton Twins</label><br>
      

      <input type="checkbox" name="movie337" value=idx>
      <label for="movied337">The Smurfs</label><br>
      

      <input type="checkbox" name="movie1516" value=idx>
      <label for="movied1516">The Star</label><br>
      

      <input type="checkbox" name="movie211" value=idx>
      <label for="movied211">The Twilight Saga: Breaking Dawn - Part 1</label><br>
      

      <input type="checkbox" name="movie47" value=idx>
      <label for="movied47">The Twilight Saga: Eclipse</label><br>
      

      <input type="checkbox" name="movie352" value=idx>
      <label for="movied352">Thor</label><br>
      

      <input type="checkbox" name="movie1506" value=idx>
      <label for="movied1506">Thor: Ragnarok</label><br>
      

      <input type="checkbox" name="movie911" value=idx>
      <label for="movied911">Thor: The Dark World</label><br>
      

      <input type="checkbox" name="movie614" value=idx>
      <label for="movied614">Touchback</label><br>
      

      <input type="checkbox" name="movie1168" value=idx>
      <label for="movied1168">Tracers</label><br>
      

      <input type="checkbox" name="movie616" value=idx>
      <label for="movied616">Underworld: Awakening</label><br>
      

      <input type="checkbox" name="movie1333" value=idx>
      <label for="movied1333">Underworld: Blood Wars</label><br>
      

      <input type="checkbox" name="movie176" value=idx>
      <label for="movied176">Vampires Suck</label><br>
      

      <input type="checkbox" name="movie619" value=idx>
      <label for="movied619">Virginia</label><br>
      

      <input type="checkbox" name="movie1442" value=idx>
      <label for="movied1442">War for the Planet of the Apes</label><br>
      

      <input type="checkbox" name="movie180" value=idx>
      <label for="movied180">What's Wrong with Virginia</label><br>
      

      <input type="checkbox" name="movie625" value=idx>
      <label for="movied625">Wrath of the Titans</label><br>
      <br>
      <input type="submit" value="Submit">  
    </form>
</div>

<script src="https://d3js.org/d3.v4.min.js"></script>
{% load static %}
<script src="{% static "viewgraph/js/node-pie.js" %}"></script>
<script>

var style = getComputedStyle(document.body);
const textAlignment_x = parseInt(style.getPropertyValue('--x-offset'), 10);


const viewBox_x = "1800";
const viewBox_y = "1500";
var svg = d3.select("div#container")
  .append("svg")
  .attr("preserveAspectRatio", "xMinYMin meet")
  .attr("viewBox", `0 0 ${viewBox_x} ${viewBox_y}`)
  .classed("svg-content", true);
// var svg = d3.select("svg"),
    // width = +svg.attr("width"),
    // height = +svg.attr("height");
    width = parseInt(viewBox_x,10);
    height = parseInt(viewBox_y,10);
    


var simulation = d3.forceSimulation()
    .force("link", d3.forceLink().id(function(d) { return d.id; }).distance(120))
    .force("charge", d3.forceManyBody().strength(-500).distanceMax(height/2))
    .force("center", d3.forceCenter(width / 2, height / 2))
    .velocityDecay(0.9)
    .alphaTarget(0.5)
    ;

var graph = JSON.parse("{{data|escapejs}}"); 

const colorMapping = {
    
    "horror/mystery" : "#64503f",
    "drama" : "#b19cd9", 
    "romance" : "#ff9fb6",
    "action/adventure/thriller" : "#ff4c42", 
    "musical" : "#ffb347", 
    "comedy" : "#8be28b", 
    "family" : "#009999", 
    "sciencefiction/fantasy" : "#1240AB",  
    "animation" : "#7ea4b3", 
    "biography/documentary" : "#adad9a", 
}

let defaultCheckBoxesContent = "{{ check_boxes_html|escapejs }}";



const defaultStrokeWidth = 2;
const defaultSrokeColor = '#b8b8b8';

var link = svg.append("g")
  .attr("class", "links")
  .selectAll("line")
  .data(graph.links)
  .enter().append("line")
  .style('stroke', defaultSrokeColor)
  .attr("stroke-width", function(d) { return defaultStrokeWidth; })
  .attr("stroke-opacity", function(d) { return d.value; });

// add background glow
var defs = svg.append("defs");

var filter = defs.append("filter")
.attr("id","glow");

filter.append("feMorphology")
  .attr("operator", "dilate")
  .attr("radius", "4")
  .attr("in", "SourceGraphic")
  .attr("result", "thicken");

filter.append("feGaussianBlur")
  .attr("in", "thicken")
  .attr("class", "blur")
  .attr("stdDeviation","20")
  .attr("result","coloredBlur");
  

filter.append("feFlood").attr("flood-color", "rgb(255, 255, 0)")
.attr("result", "glowColor");

filter.append("feComposite").attr("in", "glowColor")
  .attr("in2", "coloredBlur")
  .attr("operator", "in")
  .attr("result", "softGlow_colored")

// filter.append("feGaussianBlur").attr("in", "thicken")
// .attr("result", "blurred");

var feMerge = filter.append("feMerge");
feMerge.append("feMergeNode")
  .attr("in","softGlow_colored");
feMerge.append("feMergeNode")
  .attr("in","SourceGraphic");

var node = svg.append("g")
  .attr("class", "nodes")
  .selectAll("g")
  .data(graph.nodes)
  .enter().append("g");

defaultInstructions = ""
node.on('mouseover', function (d, i) {
        simulation.stop()
        
        // make check boxes disappear, and legend appear
        // checkBoxes.html("");
        legendLabels.attr("visibility", "visible")
        legendDots.attr("visibility", "visible")

        d3.select(this).transition()
              .duration('50')
              .attr('opacity', '.50');
        
        link
          .style('stroke', function (link_d) { 
            return link_d.source_idx === d.idx || link_d.target_idx === d.idx ? '#FFF373' : defaultSrokeColor;})
          .style('stroke-width', function (link_d) { 
            return link_d.source_idx === d.idx || link_d.target_idx === d.idx ? 4 : defaultStrokeWidth;})

        let related_idx = [];
        graph.links.forEach(function(item, index){
            if (item.source_idx === d.idx || item.target_idx == d.idx){
              related_idx.push(item.source_idx === d.idx ? item.target_idx : item.source_idx)
            };
        })

        // make linked nodes have a glow 
        node
            .style('filter', function(node_d){
              return related_idx.includes(node_d.idx) ? "url(#glow)" : "none" 
        })
            
        svgText.text(d.id);
        svgDescription.html(d.description);

    })
    .on('mouseout', function (d, i) {
        // make check boxes appear, and legend disappear
        // checkBoxes.html(defaultCheckBoxesContent);
        legendLabels.attr("visibility", "hidden")
        legendDots.attr("visibility", "hidden")

        d3.select(this).transition()
              .duration('50')
              .attr('opacity', '1');

        link
          .style('stroke', 'b8b8b8')
          .style('stroke-width', '2')
          .attr("stroke-opacity", function(d) { return d.value; });
        
        node.style('filter','none');

        //d3.select('#tools').remove();
        svgText.text(defaultInstructions);
        // svgDescription.text(defaultDescription);
        svgDescription.html(defaultDescription);

        // svgDescription2.html("<h1>hey you changed me!!!!</h1>")

        simulation.alpha(1);
        simulation.restart();
    })
  .call(d3.drag()
      .on("start", dragstarted)
      .on("drag", dragged)
      .on("end", dragended));


var color = d3.scaleOrdinal(d3.schemeCategory10);

function createPieData(d){
    let pieData = [];
    for (let i = 0; i < d.genre.length; i++){
        var pieDict = {};
        pieDict['color'] = colorMapping[d.genre[i]]
        pieDict['percent'] = 100 / d.genre.length;
        pieData.push(pieDict);
    }
    // console.log(pieData)

    return pieData;
};

/* Draw the respective pie chart for each node */
node.each(function (d) {
          NodePieBuilder.drawNodePie(d3.select(this),
          createPieData(d), 
          {
              parentNodeColor: color(1),
              outerStrokeWidth: 12,
              labelColor: color(1)
          });
      });

var labels = node.append("text")
    .text(function(d) {
      return d.id;
    })
    .attr('idx', function(d){return d.idx;})
    .attr('x', 6)
    .attr('y', 3)
    .attr('font-family', 'sans-serif')
    .attr('font-size', '10px');

node.append("title")
    .text(function(d) { return d.id; });

simulation
    .nodes(graph.nodes)
    .on("tick", ticked);

simulation.force("link")
  .links(graph.links);
    
function ticked() {
  link
      .attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

  node
      .attr("transform", function(d) {
        return "translate(" + d.x + "," + d.y + ")";
      })
};
// });

function dragstarted(d) {
  if (!d3.event.active) simulation.alphaTarget(0.3).restart();
  d.fx = d.x;
  d.fy = d.y;
}

function dragged(d) {
  d.fx = d3.event.x;
  d.fy = d3.event.y;
}

function dragended(d) {
  if (!d3.event.active) simulation.alphaTarget(0);
  d.fx = null;
  d.fy = null;
}

// add text box
const textBoxWidth = 280;
const textBoxHeight = viewBox_y;
const textBoxOpacity = '.90'
function generateTextBox(x){
  var textBox = svg.append("rect")
            .attr("x", x)
            .attr("y", 0)
            .attr("width", textBoxWidth)
            .attr("height", textBoxHeight)
            .attr('opacity', textBoxOpacity)
            .attr("fill", "white");
}
generateTextBox(textAlignment_x);

if ("{{ show_all_checkboxes|escapejs }}"){
  for (i = 1; i < 6; i++){
    generateTextBox(textAlignment_x + (textBoxWidth) * i);
  }
  const defaultInstructions = ""
} else {
  const defaultInstructions = "Hover over node to view movie description"
}

// add legend title
const legendStart_y = 400;

// add dots in legend
const betweenLegendElements_y = 20;
var legendDots = svg.selectAll("mydots")
  .data(Object.keys(colorMapping))
  .enter()
  .append("circle")
    .attr("cx", textAlignment_x)
    .attr("cy", function(d,i){ return legendStart_y + 25 + i*betweenLegendElements_y}) 
    .attr("r", 5)
    .style("fill", function(d,i){return colorMapping[d]})
    .attr("visibility", "hidden");

// add labels
var legendLabels = svg.selectAll("mylabels")
  .data(Object.keys(colorMapping))
  .enter()
  .append("text")
    .attr("x", textAlignment_x + 20)
    .attr("y", function(d,i){ return legendStart_y +30 + i*betweenLegendElements_y}) 
    .style("fill", function(d,i){return colorMapping[d]})
    .text(function(d){ return d})
    .attr("text-anchor", "left")
    .attr("font-family", "Georgia")
    .attr("font-size", "15px")
    .style("alignment-baseline", "middle")
    .attr("visibility", "hidden");
    

// Instructions for user
var svgText = svg.append("text");
svgText
  .attr("x",textAlignment_x)
  .attr("y",50)
  .attr("font-family", "Georgia");

svgText.text(defaultInstructions);

const defaultDescription = ""

const descriptionTextStart = 70;
var svgDescription = svg.append("foreignObject")
    .attr("x",textAlignment_x)
    .attr("y",descriptionTextStart)
    .attr("width", textBoxWidth)
    .attr("height", 300)
    .append("xhtml:svg")
    .style("font", "13px 'Georgia Neue'")
    .style("font-style", "italic")
    .text(defaultDescription)
    ;
    // .html("Lorem ipsum dolor sit  amet, consectetur adipiscing elit. Donec eu enim quam. Quisque nisi risus, sagittis quis tempor nec, aliquam eget neque. Nulla bibendum semper lorem non ullamcorper. Nulla non ligula lorem. Praesent porttitor, tellus nec suscipit aliquam, enim elit posuere lorem, at laoreet enim ligula sed tortor. Ut sodales, urna a aliquam semper, nibh diam gravida sapien, sit amet fermentum purus lacus eget massa. Donec ac arcu vel magna consequat pretium et vel ligula. Donec sit amet erat elit. Vivamus eu metus eget est hendrerit rutrum. Curabitur vitae orci et leo interdum egestas ut sit amet dui. In varius enim ut sem posuere in tristique metus ultrices.<p>Integer mollis massa at orci porta vestibulum. Pellentesque dignissim turpis ut tortor ultricies condimentum et quis nibh. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer euismod lorem vulputate dui pharetra luctus. Sed vulputate, nunc quis porttitor scelerisque, dui est varius ipsum, eu blandit mauris nibh pellentesque tortor. Vivamus ultricies ante eget ipsum pulvinar ac tempor turpis mollis. Morbi tortor orci, euismod vel sagittis ac, lobortis nec est. Quisque euismod venenatis felis at dapibus. Vestibulum dignissim nulla ut nisi tristique porttitor. Proin et nunc id arcu cursus dapibus non quis libero. Nunc ligula mi, bibendum non mattis nec, luctus id neque. Suspendisse ut eros lacus. Praesent eget lacus eget risus congue vestibulum. Morbi tincidunt pulvinar lacus sed faucibus. Phasellus sed vestibulum sapien.");

function generateCheckBoxes(x, html){
  var checkBoxes = svg.append("foreignObject")
    .attr("x",x)
    .attr("y",descriptionTextStart)
    .attr("width", textBoxWidth)
    .attr("height", 900)
    .append("xhtml:svg")
    .style("font", "13px 'Georgia Neue'")
    .style("font-style", "italic")
    .html(html)
}

// generateCheckBoxes(textAlignment_x, `<form action="/selection" method="get">
//     <input type="checkbox" name="movie0" value=0>
//     <label for="movie0">127 Hours</label><br>`);
  
// generateCheckBoxes(textAlignment_x + textBoxWidth, `<input type="checkbox" name="movie4" value=4>
//     <label for="movie4">Do not choose</label><br>
//     <br>
//     <input type="submit" value="Submit">

//     </form>`);



</script>

</body>



